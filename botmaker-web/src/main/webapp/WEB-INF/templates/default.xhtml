<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j">
<f:view contentType="text/html; charset=ISO-8859-1" encoding="ISO-8859-1">
	<h:head>
		<title><h:outputText value="BotMaker" /></title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<h:outputStylesheet name="css/botmaker.css" />
		<h:outputStylesheet name="css/codemirror/codemirror.css" />
		<h:outputStylesheet name="css/codemirror/ambiance.css" />
		<h:outputStylesheet name="css/codemirror/cobalt.css" />
		<h:outputStylesheet name="css/codemirror/eclipse.css" />
		<h:outputStylesheet name="css/codemirror/elegant.css" />
		<h:outputStylesheet name="css/codemirror/erlang-dark.css" />
		<h:outputStylesheet name="css/codemirror/icecoder.css" />
		<h:outputStylesheet name="css/codemirror/liquibyte.css" />
		<h:outputStylesheet name="css/codemirror/monokai.css" />
		<h:outputStylesheet name="css/codemirror/pastel-on-dark.css" />
		<h:outputStylesheet name="css/codemirror/solarized.css" />
		<h:outputStylesheet name="css/codemirror/rubyblue.css" />
		<h:outputStylesheet name="css/codemirror/vibrant-ink.css" />
		<h:outputScript name="js/codemirror/lib/codemirror.js" />
		<h:outputScript name="js/codemirror/mode/groovy/groovy.js" />
		<h:outputScript name="js/markdown/markdown.min.js" />
	</h:head>
	<h:body styleClass="page">
		<a4j:status onstart="#{rich:component('statPane')}.show()" onstop="#{rich:component('statPane')}.hide()" />
		<h:form id="frm" acceptcharset="ISO-8859-1">
			<h:panelGroup layout="block" styleClass="head">
				<rich:toolbar rendered="#{botMakerAuthenticator.authenticated}" styleClass="menubar">
					<rich:dropDownMenu mode="ajax">
						<f:facet name="label">
							<h:outputText value="Validators" />
						</f:facet>
						<rich:menuItem label="New validator" action="#{validatorAction.startNew()}" immediate="true" execute="@this" />
						<rich:menuItem label="Search validators" action="#{validatorAction.list()}" immediate="true" execute="@this" />
					</rich:dropDownMenu>
					<rich:dropDownMenu mode="ajax">
						<f:facet name="label">
							<h:outputText value="Bots" />
						</f:facet>
						<rich:dataGrid var="bt" value="#{auxAction.bots}" columns="1" styleClass="pc100">
							<rich:column>
								<h:commandLink value="#{bt.name}" action="#{botAction.detail(bt)}" styleClass="menuitem #{(bt.active ? 'green' : 'gray')}" />
							</rich:column>
						</rich:dataGrid>
						<rich:menuSeparator />
						<rich:menuItem label="Search bots" action="#{botAction.list()}" immediate="true" />
						<rich:menuItem label="New bot" action="#{botAction.startNew()}" immediate="true" />
					</rich:dropDownMenu>
					<rich:dropDownMenu mode="ajax">
						<f:facet name="label">
							<h:outputText value="#{botMakerCredentials.user.name}" />
						</f:facet>
						<rich:menuItem label="Preferences" action="#{userPreferenceAction.init()}" immediate="true" execute="@this" />
						<rich:menuSeparator />
						<rich:menuItem label="Logout" action="#{userAction.logoff()}" immediate="true" />
					</rich:dropDownMenu>
				</rich:toolbar>
			</h:panelGroup>
			<h:panelGroup layout="block">
				<ui:insert name="content">
				[Template content will be inserted here]
			</ui:insert>
			</h:panelGroup>

			<rich:popupPanel id="statPane" autosized="true" styleClass="statPane" modal="true">
    	        Please wait...
	        </rich:popupPanel>
		</h:form>
		<rich:notifyStack id="mainStack" position="topRight" direction="vertical" method="first" />
		<rich:notify id="notify" stack="mainStack" summary="#{msgAction.showMsg()}" escape="false" rendered="#{msgAction.mustShow}" />
	</h:body>
</f:view>
</html>