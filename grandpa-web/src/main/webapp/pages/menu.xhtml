<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<h:panelGroup layout="block" rendered="#{botMakerAuthenticator.loggedIn}">

		<rich:panelMenu styleClass="w3-padding">
			<rich:panelMenuGroup label="Expressions" rendered="#{botMakerCredentials.user.admin}" styleClass="w3-indigo">
				<rich:panelMenuItem label="List Expressions" action="#{blackListExpressionAction.list()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Expression" action="#{blackListExpressionAction.startNew()}" immediate="true" execute="@this" styleClass="w3-text-white" />
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="Validators" styleClass="w3-indigo">
				<rich:panelMenuItem label="List Validators" action="#{validatorAction.list()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Validator" action="#{validatorAction.startNew()}" immediate="true" execute="@this" styleClass="w3-text-white" />
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="Bots" styleClass="w3-indigo">
				<c:forEach items="#{auxAction.bots}" var="bt">
					<rich:panelMenuItem label="#{bt.name}" action="#{botAction.detail(bt)}" immediate="true" execute="@this" styleClass="w3-text-#{(bt.valid) ? 'green' : 'red'}" />
				</c:forEach>
				<rich:menuSeparator />
				<rich:panelMenuItem label="List Bots" action="#{botAction.list()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Bot" action="#{botAction.startNew()}" immediate="true" execute="@this" styleClass="w3-text-white" />
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="Scripts" styleClass="w3-indigo">
				<c:forEach items="#{auxAction.lastGenericScripts}" var="sc">
					<rich:panelMenuItem label="#{sc.name}" action="#{scriptAction.startEditGeneric(sc)}" immediate="true" execute="@this" styleClass="w3-text-white" />
				</c:forEach>
				<rich:menuSeparator />
				<rich:panelMenuItem label="List Generic Scripts" action="#{scriptAction.listGenericScripts()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Generic Script" action="#{scriptAction.startNewGeneric()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:menuSeparator />
				<c:forEach items="#{auxAction.lastCommandScriptsEdited}" var="cse">
					<rich:panelMenuItem action="#{scriptAction.startEditScript(cse.command.bot, cse.command, cse)}" immediate="true" execute="@this"  styleClass="w3-text-white">
						<h:outputLabel value="#{cse.command.key}"
							styleClass="tx9 personal-item #{(cse.scriptType eq 'GROOVY') ? 'groovy' : (cse.scriptType eq 'PYTHON') ? 'python' : (cse.scriptType eq 'JAVASCRIPT') ? 'javascript' : 'none'}" />
						<h:outputLabel value="(#{cse.command.bot.name})" styleClass="tx9 personal-item" />
					</rich:panelMenuItem>
				</c:forEach>
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="Blog" styleClass="w3-indigo">
				<rich:panelMenuItem label="List Blogs" action="#{blogAction.listBlogs()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Blog" action="#{blogAction.startNewBlog()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:menuSeparator />
				<rich:panelMenuItem label="List Categories" action="#{categoryAction.listCategories()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Category" action="#{categoryAction.startNewCategory()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:menuSeparator />
				<rich:panelMenuItem label="List Pages" action="#{pageAction.list()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Page" action="#{pageAction.startNew()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:menuSeparator />
				<c:forEach items="#{auxAction.lastPagesEdited}" var="pg">
					<rich:panelMenuItem label="#{pg.title}" action="#{pageAction.detail(pg)}" immediate="true" execute="@this" styleClass="w3-text-white" />
				</c:forEach>
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="Photograph" styleClass="w3-indigo">
				<rich:panelMenuItem label="List Galleries" action="#{galleryAction.listGalleries()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:panelMenuItem label="New Gallery" action="#{galleryAction.startNewGallery()}" immediate="true" execute="@this" styleClass="w3-text-white" />
			</rich:panelMenuGroup>

			<rich:panelMenuGroup label="My account (#{botMakerCredentials.user.username})" styleClass="w3-orange">
				<rich:panelMenuItem label="Preferences" action="#{userPreferenceAction.init()}" immediate="true" execute="@this" styleClass="w3-text-white" />
				<rich:menuSeparator />
				<rich:panelMenuItem label="Logout" action="#{userAction.logoff()}" immediate="true" styleClass="w3-text-white" />
			</rich:panelMenuGroup>

		</rich:panelMenu>

	</h:panelGroup>
</ui:composition>